<html>
	<head>
		<meta charset="UTF-8">
		<title>Chat Demo</title>
		<script src="/socket.io/socket.io.js"></script>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
		<script src="b.js"></script>
		<script>
			socket.on("receive_answer",function (answer) {
				writeLog("receive an answer");
				writeLog("0 answer Have audio="+((answer.sdp.indexOf("audio")>-1)?"yes":"no")+",Have video="+((answer.sdp.indexOf("video")>-1)?"yes":"no"));
				receiveAnswer(answer);
			});
			socket.on("receive_iceCandidate",function (iceCandidate) {
				writeLog("receive ice candidate");
				receiveICECandidate(iceCandidate);
			});
			socket.on("receive_offer",function (offer) {
				writeLog("receive an offer");
				receiveCall(offer);
			});
		</script>
	</head>
	<body>
		<div style="display:flex;flex-direction:column;border:1px solid black;width:100%;height:100%;">
			<div style="display:flex;flex-direction:row;1px solid red;height:70%;border:1px solid red;margin:3px;">
				<div style="display:flex;flex-direction:column;border:1px solid blue;margin:3px;width:50%">
					<div style="border:1px solid blue;margin:3px;">
						Self View
					</div>
					<div style="overflow: hidden;margin:3px;border:1px solid orange;height:100%">
						<video id="selfView" autoplay controls muted style="object-fit: cover;width:100%;height:100%;">
						</video>
					</div>
				</div>
				<div style="display:flex;flex-direction:column;border:1px solid magenta;margin:3px;width:50%">
					<div style="border:1px solid blue;margin:3px;">
						Remote View
					</div>
					<div style="overflow: hidden;margin:3px;border:1px solid orange;height:100%">
						<video id="remoteView" autoplay controls muted style="object-fit: cover;width:100%;height:100%;">
						</video>
					</div>
				</div>
			</div>
			<div style="1px solid red;height:10%;border:1px solid green;margin:3px;">
				<input type="checkbox" id="shareAudio" onchange="toggleShareAudio()" checked>Share Audio 
				<input type="checkbox" id="shareVideo" onchange="toggleShareVideo()" checked>Share Video<br>
				<p>
					<button id="buttoncreateoffer" onclick="makeACall()">Call</button>
					<button id="buttoncreateoffer" onclick="hangUp()">Hang Up</button>
				</p>			
			</div>
			<div style="1px solid red;height:20%;border:1px solid darkcyan;margin:3px;overflow:scroll">
				<div id="chatlog"></div>
				<div id="logger"></div>		
			</div>
		</div>
	</body>
</html>	